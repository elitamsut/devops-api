 gcloud iam service-accounts create gitlab-ci --display-name "GitLab CI Service Account"

Created service account [gitlab-ci].


gcloud projects add-iam-policy-binding eli-tamsut-devops-assessment \
  --member="serviceAccount:gitlab-ci@<YOUR_PROJECT_ID>.iam.gserviceaccount.com" \
  --role="roles/container.admin"

gcloud projects add-iam-policy-binding eli-tamsut-devops-assessment \
  --member="serviceAccount:gitlab-ci@eli-tamsut-devops-assessment.iam.gserviceaccount.com" \
  --role="roles/viewer"

gcloud projects add-iam-policy-binding eli-tamsut-devops-assessment \
  --member="serviceAccount:gitlab-ci@eli-tamsut-devops-assessment.iam.gserviceaccount.com" \
  --role="roles/cloudbuild.builds.editor"
  



I need to deploy the Nginx Ingress Controller on our GKE cluster via Helm as part of a GitLab CI/CD pipeline. To accomplish this, the GitLab CI service account requires specific permissions to interact with the Kubernetes cluster.

Could you please grant the following roles to the GitLab CI service account:

Service Account: gitlab-ci@eli-tamsut-devops-assessment.iam.gserviceaccount.com
Role 1: roles/container.admin     (This allows the GitLab CI service account to manage GKE clusters and deploy Helm charts to the cluster)
Role 2: roles/viewer     (to allow read-only access to cluster resources)
Role 3 role/container.clusterUser â€“ To interact with and use GKE clusters.
These roles will provide the necessary permissions for deploying and managing resources in the cluster, such as deploying the Nginx Ingress Controller and applications via Helm, as well as viewing cluster configurations.

Thank you for your assistance in setting this up!
